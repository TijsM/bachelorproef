

\section{Besturingssystemen en PWA’s}

Om te weten te komen voor welke toepassingen een PWA gemaakt kan worden en voor welke toepassingen nog steeds een native applicatie nodig is, is het belangrijk om te weten wat de technische mogelijkheden zijn van een PWA. In deze sectie van de literatuurstudie wordt er bekeken welke functies, die beschikbaar zijn voor native applicaties, al dan niet gebruikt kunnen worden door PWA’s.

Dit onderzoek werd gevoerd met behulp van de website whatwebcando.today en caniuse.com. 

whatwebcando.today is een website die kleine voorbeelden van verschillende technologieën demonstreert. Door deze voorbeelden te testen op verschillende platformen kan er uitgemaakt worden welke technologieën er beschikbaar zijn voor het web, en op welke platformen deze beschikbaar zijn.

Caniuse.com is een website die voor verschillende web-technologieën een overzicht biedt op welke browsers deze technologie gebruikt kan worden en op welke niet. Deze website werd gebruikt om de ondervindingen van de testen die werden uitgevoerd te valideren. 

Een web-API is een API die wordt aangeboden door de browser. Het verschil met web-API’s en traditionele API’s is dat web-API’s lokaal worden aangeboden door de browser en er dus geen internetverbinding nodig is om van deze functionaliteiten te genieten.

\autocite{Mozilla2019c}

Als er meer informatie nodig was over de web API’s werd deze gevonden op developers.Google.com of op developer.mozilla.org. 

Er werd gekeken op welke platformen bepaalde functies wel en niet werkten. De volgende platformen werden onderzocht:
\begin{itemize}
   \item Desktop:
   \begin{itemize}
     \item	Microsoft edge versie 80 op Windows 10
     \item	Mozilla firefox versie 73.0 op Windows 10
     \item	Google Chrome versie 79.0 op Windows 10
     \item  Safari (desktop) versie 13.0.5 op een Macbook Pro met macOS Mojave (10.14.6)
   \end{itemize}
\end{itemize}


\begin{itemize}
   \item Mobiel:
   \begin{itemize}
     \item Google Chrome versie 80 op Android 10 op een OnePlus 6
     \item Safari (mobiel) versie 13 op IOS 13 op een IPhone SE 
     
   \end{itemize}
\end{itemize}

De testen werden uitgevoerd op 7 maart 2020.

De website whatwebcando.today geeft een overzicht van de functionaliteiten aan de hand van een bepaalde structuur. Deze structuur werd overgenomen en ziet er als volgt uit:
   \begin{itemize}
     \item	Media
     \item	Verbinding
     \item	Toestel kenmerken
     \item	Native gedrag
     \item	Besturingssysteem
     \item	Input
     \item	User experience
     \item	Locatie en positionering
     \item	Scherm en output
   \end{itemize}

\subsection{Onderzoek}

\subsubsection{Media}

\paragraph{Video met audio }
Sommige van de meest populaire mobiele applicaties zijn sterk afhankelijk van camera-functionaliteit. Voorbeelden hiervan zijn Snapchat, Instagram, Messenger, WhatsApp, … 

Bij deze applicaties is het belangrijk dat de camera aan volgende vereisten voldoet:

   \begin{itemize}
     \item	Snel en eenvoudig te gebruiken
     \item	Er moet van camera gewisseld kunnen worden
     \item	Er moet ingezoomd kunnen worden
     \item	De flashlight moet gebruikt kunnen worden
   \end{itemize}

De media capture API \autocite{DzungDTran}  maakt het mogelijk om een video die opgenomen wordt met de camera van het toestel te tonen op de webpagina. Deze video kan dan opgeslagen worden in de code en verzonden worden naar een server. 

\autocite{Fransson2017}

De media capture API is ook in staat om aan het toestel te vragen welke camera’s er beschikbaar zijn en dan te verwisselen van camera.

\autocite{Scales2020a}

Ook meer geavanceerde functionaliteiten zijn beschikbaar. Het gedrag van de zoom en de flashlight kan ook programmatisch bepaald worden.

\autocite{Oberhofer2017} \autocite{Ogundipe2018}


Al de belangrijkste functionaliteiten die een gebruiker verwacht, zijn allemaal aanwezig. Applicaties die afhankelijk zijn van video-opnames kunnen dus geïmplementeerd worden als PWA.

\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Ja   & Ja      & Ja     & Ja     & Ja               & Ja          
	\end{tabular}	
	\caption{ondersteuning van de Media Capture API}
	\label{ondersteuning_MediaCapture}
\end{table}



\paragraph{Foto's }
Het vastleggen van foto’s is ook voor veel populaire applicaties belangrijk. Ook dit is een belangrijke functionaliteit voor sociale media applicaties.

Foto’s die gedeeld worden op sociale media moeten vaak van een zo hoog mogelijke kwaliteit zijn. Op native applicaties wordt deze kwaliteit bereikt door volgende eigenschappen: 

 \begin{itemize}
     \item Manuele en automatische focus
     \item Aanpassen van sluitersnelheid
     \item Aanpassen van witbalans
     \item Aanpassen ISO-waarde
     \item Gebruik maken van HDR 
   \end{itemize}

Foto’s kunnen ook, net zoals een video, genomen worden aan de hand van de Media capture API. Deze API is echter niet in staat om deze instellingen van de camera aan te passen.

De Image Capture API \autocite{Mandyam2020} is ontwikkeld om meer controle te hebben over de camera. Deze API zorgt ervoor dat instellingen zoals witbalans, temperatuur, exposure, ISO, helderheid, contrast, saturatie, zoom, … programmatisch aangepast kunnen worden.

Deze API heeft standaard geen ondersteuning voor HDR, maar dit kan zelf geïmplementeerd worden aan de hand van ‘third-party-packages’.

\autocite{Bhaumik2019}

\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Nee   & Nee      & Ja     & Nee     & Ja               & Nee          
	\end{tabular}	
	\caption{ondersteuning van de Image Capture API}
	\label{ondersteuning_MediaCapture}
\end{table}



\paragraph{Geluidopname }
De mediarecorder API, \autocite{CasasSanchez2020} door meerdere browsers aangeboden, is een manier om eenvoudig geluidsfragmenten op te nemen en te importeren in een webapplicatie.

Helaas is er voor Apple-toestellen geen ondersteuning. In de toekomst zal deze functie waarschijnlijk ook beschikbaar worden voor deze toestellen. Dit wordt in de volgende versie van Safari (Safari 14) voor desktop verwacht. Voor Safari voor IOS bestaat deze functie al maar is het nog een experimentele functie die de gebruiker zelf moet activeren.


%TODO: checken voor nieuwe update IOS 14
******************** checken voor nieuwe update IOS 14 **************************

\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Ja   & Ja      & Ja     & Nee     & Ja               & Nee          
	\end{tabular}	
	\caption{ondersteuning van de Image Capture API}
	\label{ondersteuning_ImageCapture}
\end{table}

Gelukkig is er een alternatief voorzien met HTML5-tags. Dit is een methode die voor alle platformen zal werken maar niet op dezelfde manier.

\begin{lstlisting}
<input type="file" accept="audio/*" capture>
\end{lstlisting}

Er wordt gebruik gemaakt van een inputveld waar de gebruiker een bestand kan uploaden. Door het accept attribuut wordt duidelijk gemaakt dat enkel audiofragmenten geüpload mogen worden. Het capture attribuut zorgt ervoor dat waar mogelijk de gebruiker een audiofragment kan opnemen in de default geluidsopname app. Dit fragment wordt dan automatisch geïmporteerd in de webapplicatie. Dit is enkel mogelijk op mobiele toestellen en dus niet in desktopbrowsers.

\autocite{Kinlan2019}

Dit is een goed voorbeeld van progressive enhancement. 



\paragraph{Real-time communicatie }

Bij de meeste populaire communicatieapplicaties zoals WhatsApp, Messenger, Skype, … is videobellen mogelijk. Om dit mogelijk te maken moet er live video en audio gestreamd kunnen worden tussen twee of meer personen.

‘Real-time communication in the web’ of WebRTC \autocite{Jennings2020} is een verzameling van API’s die het verzenden en ontvangen van real-time video en audio mogelijk maakt, zonder afhankelijk te zijn van een gecentraliseerde server. Deze server is echter wel nodig om een connectie tot stand te brengen. Eens deze connectie er is, is er een peer-to-peer verbinding.

\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Ja   & Ja      & Ja     & Ja     & Ja               & ja          
	\end{tabular}	
	\caption{ondersteuning van WebRTC}
	\label{ondersteuning_WebRTC}
\end{table}


\paragraph{Casting}
Applicaties die media tonen aan de gebruiker kunnen deze casten naar tv-toestel. Dit gebeurt bij Apple toestellen aan de hand van Airplay en bij Android toestellen aan de hand van google cast.

YouTube is een applicatie die hier gebruik van maakt. Als er een video bekeken wordt, zal de gebruiker een optie krijgen om deze te tonen om een tv.

Op Apple toestellen kan een PWA nu ook AirPlay implementeren. 
\autocite{Apple2020a}

De Chrome Sender API \autocite{Developers2020b} zorgt ervoor dat alle modern toestellen media kunnen delen op een tv of ander scherm die dit ondersteund.

\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Nee   & Nee      & Nee     & Ja     & Nee               & Ja          
	\end{tabular}	
	\caption{ondersteuning Apple AirPlay}
	\label{ondersteuning_AirPlay}
\end{table}
\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Ja   & Ja      & Ja     & Ja     & Ja               & ja          
	\end{tabular}	
	\caption{ondersteuning van Chrome Sender API}
	\label{ondersteuning_ChromeSender}
\end{table}


\paragraph{Media-controle in de notificatie }

Als een native applicatie media afspeelt op een mobiel toestel, kan deze applicatie bestuurd worden vanuit de notificatie. De afgespeelde media zal ook niet stoppen als een gebruiker de applicatie verlaat

Een voorbeeld hiervan is Spotify, in de notificatie van Spotify kan de gebruiker volgende acties uitvoeren.
 \begin{itemize}
   \item	Informatie bekijken over het nummer
   \item	Naar het volgende nummer gaan
   \item	Het nummer pauzeren
   \item	Het nummer toevoegen aan “mijn favorieten”
   \item	De vooruitgang van het nummer zien en aanpassen
\end{itemize}
De Media Session API \autocite{Beaufort2019} zorgt ervoor dat als er media afgespeeld wordt op een website, en de browser wordt gesloten, de media niet zal stoppen met afspelen.

Deze API zorgt er ook voor dat er een notificatie komt waar de gebruiker controle heeft over de afgespeelde media. 

Het voorbeeld van Spotify kan dus volledig geïmplementeerd worden als PWA.

\begin{table}[]
	\begin{tabular}{llllll}
		Edge & Firefox & Chrome & Safari & Android (Chrome) & IOS (Safari) \\
		Ja   & Ja      & Ja     & Ja     & Ja               & ja          
	\end{tabular}	
	\caption{ondersteuning van Media Session API}
	\label{ondersteuning_MediaSession}
\end{table}


\subsubsection{Connectie met andere apparaten}
\subsubsection{Toestelkenmerken}
\subsubsection{Native gedrag}
\subsubsection{Besturingssysteem}
\subsubsection{Input}
\subsubsection{User experience}
\subsubsection{Locatie en positionering}
\subsubsection{Scherm en output}

\subsection{Conclusie }

\subsubsection{Browsers}

\subsubsection{Mobiele besturingssystemen }

\subsubsection{Desktop besturingssystemen}






